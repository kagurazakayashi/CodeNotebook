移位运算比乘除法效率更高，当然用移位运算替代乘除法代码会有点晦涩。下面记录下自己学习的内容以做备忘。
# 用移位实现乘除法运算
- `a = a * 8;`
- `b = b / 8;`
可以改为：
- `a = a << 3;`
- `b = b >> 3;`
说明：
- `除2` = `右`移`1`位； `乘2` = `左`移`1`位
- `除4` = `右`移`2`位； `乘4` = `左`移`2`位
- `除8` = `右`移`3`位； `乘8` = `左`移`3`位

通常如果需要乘以或除以2的n次方，都可以用移位的方法代替，大部分的C编译器,用移位的方法得到代码比调用乘除法子程序生成的代码效率高。

实际上，只要是乘以或除以一个整数才可以用移位的方法得到结果。如：

- `a=a*9`
    - 分析`a * 9`可以拆分成`a * ( 8 + 1 )`即`a * 8 + a * 1`,
    - 因此可以改为： ` a = ( a << 3 ) + a`
- `a=a*7`
    - 分析`a * 7`可以拆分成`a * ( 8 - 1 )`即`a * 8 - a * 1`,
    - 因此可以改为： `a = ( a << 3 ) - a`

- 总结：`a=a*n;` n分解成`(2^m + s)`,
    - 则`a=a*n`可以改为`a=(a<<m)+a*s`;`a*s`再同理分解替换。
    - 例：`a=a*10` => `a=a*(8+2)` => `a=a*8 + a*2` => `a=(a<<3)+(a<<1)`

## 注：
1. 只有整型数据才能用移位替代乘除法，如： `char`,`short`,`int`,`long`,`unsigned char`,`unsigned short`,`unsigned int`,`unsigned long。（double`,`float`,`bool`,`long double` 则不可以进行移位操作。）
2. 有符号数据类型移位需要注意符号位：
- 对`负`数进行`左`移： 符号位始终为1，其他位左移。
- 对`正`数进行`左`移： 所有位左移，即 `<<`，可能会变成`负数`。
- 对`正`数进行`右`移： 所有位右移，即 `>>`